################################################################################
# THIS FILE IS PART OF SANDBOX, LICENSED UNDER THE
#
#                 GNU GENERAL PUBLIC LICENSE V3.0
#
# PERMISSIONS OF THIS STRONG COPYLEFT LICENSE ARE CONDITIONED ON MAKING 
# AVAILABLE COMPLETE SOURCE CODE OF LICENSED WORKS AND MODIFICATIONS, WHICH 
# INCLUDE LARGER WORKS USING A LICENSED WORK, UNDER THE SAME LICENSE. 
# COPYRIGHT AND LICENSE NOTICES MUST BE PRESERVED. CONTRIBUTORS PROVIDE AN 
# EXPRESS GRANT OF PATENT RIGHTS.
# 
# SANDBOX IS FREE SOFTWARE: YOU CAN REDISTRIBUTE IT AND/OR MODIFY IT UNDER 
# THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY THE FREE SOFTWARE 
# FOUNDATION, EITHER VERSION 3 OF THE LICENSE, OR (AT YOUR OPTION) ANY LATER 
# VERSION.
# 
# SANDBOX IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT WITHOUT ANY
# WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF MERCHANTABILITY OR FITNESS FOR
# A PARTICULAR PURPOSE. SEE THE GNU GENERAL PUBLIC LICENSE FOR MORE DETAILS.
# 
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE ALONG WITH 
# SANDBOX. IF NOT, SEE <HTTPS://WWW.GNU.ORG/LICENSES/>. 
#
################################################################################

.RECIPEPREFIX = >

CC          = g++ -Wall -Wextra -O3 -m64

SOURCE_CPP  = x.cpp

MAIN_CPP    = main.cpp
MAIN_BIN    = main

TESTS_CPP   = test_x.cpp
TESTS_MAIN  = test_runner.cpp
TESTS_BIN   = test_runner


all: compile

clean:
> find . -name '*.o' -exec rm -f '{}' ';'
> rm -f $(MAIN_BIN) $(TESTS_BIN);

compile:
> rm -f $(MAIN_BIN);
> $(CC)  -o $(MAIN_BIN)  $(SOURCE_CPP) $(MAIN_CPP)

run:
> ./$(MAIN_BIN)

test:  test_suite
check: test_suite

test_runner:
> rm -f $(TESTS_BIN).o $(TESTS_BIN);
> $(CC)  -fPIE -c  $(TESTS_MAIN)

test_suite:
> rm -f $(TESTS_BIN);
> $(CC)  -fPIE -o $(TESTS_BIN)  $(TESTS_BIN).o $(TESTS_CPP) $(SOURCE_CPP);
> ./$(TESTS_BIN);
